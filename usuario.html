<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mapa de Cargadores</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-gray-300 flex flex-col items-center p-6 relative">

<h1 class="text-3xl font-bold mb-4 text-center">Mapa de Cargadores</h1>

<!-- Contenedor del mapa con geolocalizaci√≥n -->
<iframe
        id="mapaCargadores"
        src="https://map.openchargemap.io/?mode=embedded&latitude=40.416775&longitude=-3.703790&zoom=12"
        allow="geolocation"
        frameborder="0"
        width="80%"
        height="500px"
        class="rounded-lg shadow-lg">
</iframe>

<button onclick="cerrarSesion()" class="mt-6 bg-red-600 text-white px-4 py-2 rounded">Cerrar Sesi√≥n</button>

<script>
  // Redirigir a la p√°gina de login al cerrar sesi√≥n
  function cerrarSesion() {
    window.location.href = "login.html"; // üîπ Cambia esto por la URL de tu p√°gina de login
  }

  // Funci√≥n para obtener la ubicaci√≥n del usuario
  function obtenerUbicacion() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
              function (position) {
                const lat = position.coords.latitude;
                const lon = position.coords.longitude;
                console.log("Ubicaci√≥n obtenida:", lat, lon);

                // Modificar el src del iframe con la nueva ubicaci√≥n
                document.getElementById("mapaCargadores").src =
                        `https://map.openchargemap.io/?mode=embedded&latitude=${lat}&longitude=${lon}&zoom=14`;
              },
              function (error) {
                console.warn("‚ö† No se pudo obtener la ubicaci√≥n. Se usar√° la ubicaci√≥n por defecto (Madrid).", error);
              }
      );
    } else {
      console.warn("‚ö† Geolocalizaci√≥n no es soportada en este navegador.");
    }
  }

  // Llamar a la funci√≥n cuando cargue la p√°gina
  obtenerUbicacion();
</script>

</body>
</html>
